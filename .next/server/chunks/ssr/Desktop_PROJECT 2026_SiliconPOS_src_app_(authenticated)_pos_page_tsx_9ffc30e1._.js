module.exports=[95987,a=>{"use strict";var b=a.i(76301),c=a.i(62495),d=a.i(256),e=a.i(35009),f=a.i(4869),g=a.i(56895),h=a.i(53091),i=a.i(88637),j=a.i(41126),k=a.i(31496),l=a.i(85673),m=a.i(42467),n=a.i(29387),o=a.i(19426),p=a.i(34729),q=a.i(71367),r=a.i(52173);let s=(0,r.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var t=a.i(11654),u=a.i(24821),v=a.i(58992),w=a.i(78442);let x=(0,r.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y=(0,r.default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var z=a.i(5606);let A=(0,r.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var B=a.i(97833),C=a.i(39526);function D(){let[a,r]=(0,c.useState)(""),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(0),{toast:N}=(0,B.useToast)(),{data:O,isLoading:P}=(0,d.useQuery)({queryKey:["/api/products"],queryFn:()=>(0,C.apiRequest)("GET","/api/products").then(a=>a.json())}),{data:Q,isLoading:R}=(0,d.useQuery)({queryKey:["/api/services"],queryFn:()=>(0,C.apiRequest)("GET","/api/services").then(a=>a.json())}),S=(0,e.useMutation)({mutationFn:async a=>await (0,C.apiRequest)("POST","/api/sales",a),onSuccess:()=>{N({title:"Sale completed!",description:"Transaction has been recorded successfully."}),E([]),G(""),I(""),M(0),K(!1),C.queryClient.invalidateQueries({queryKey:["/api/sales"]}),C.queryClient.invalidateQueries({queryKey:["/api/products"]}),C.queryClient.invalidateQueries({queryKey:["/api/dashboard/stats"]})},onError:a=>{N({title:"Sale failed",description:a.message,variant:"destructive"})}}),T=O?.filter(b=>b.isActive&&b.stockQuantity>0&&(b.name.toLowerCase().includes(a.toLowerCase())||b.sku?.toLowerCase().includes(a.toLowerCase()))),U=Q?.filter(b=>b.isActive&&b.name.toLowerCase().includes(a.toLowerCase())),V=(a,b)=>{let c=D.find(c=>c.id===a.id&&c.type===b);if(c){if("product"===b&&c.quantity>=a.stockQuantity)return void N({title:"Stock limit reached",description:`Only ${a.stockQuantity} units available.`,variant:"destructive"});E(D.map(c=>c.id===a.id&&c.type===b?{...c,quantity:c.quantity+1}:c))}else E([...D,{id:a.id,name:a.name,price:Number(a.price),quantity:1,type:b,productId:"product"===b?a.id:void 0,serviceId:"service"===b?a.id:void 0,maxStock:"product"===b?a.stockQuantity:void 0}])},W=(a,b,c)=>{E(D.map(d=>{if(d.id===a&&d.type===b){let a=d.quantity+c;return a<=0?null:d.maxStock&&a>d.maxStock?(N({title:"Stock limit reached",description:`Only ${d.maxStock} units available.`,variant:"destructive"}),d):{...d,quantity:a}}return d}).filter(Boolean))},X=D.reduce((a,b)=>a+b.price*b.quantity,0),Y=X*L/100,Z=X-Y,$=P||R;return(0,b.jsxs)("div",{className:"h-[calc(100vh-60px)] -m-4 md:-m-6 lg:-m-8 flex flex-col lg:flex-row bg-muted/10",children:[(0,b.jsx)("div",{className:"flex-1 flex flex-col min-h-0 p-4 lg:p-6 lg:pr-3",children:(0,b.jsxs)(f.Card,{className:"flex-1 flex flex-col min-h-0 border-border/60 shadow-sm overflow-hidden bg-background",children:[(0,b.jsxs)(f.CardHeader,{className:"pb-4 pt-5 px-5 border-b bg-muted/10",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2 font-heading text-xl",children:[(0,b.jsx)(u.ShoppingCart,{className:"h-5 w-5 text-primary"}),"Point of Sale"]})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search catalog... (e.g. Router, Camera)",value:a,onChange:a=>r(a.target.value),className:"pl-10 bg-background border-border/60 shadow-sm h-11 transition-all focus-visible:ring-primary/30","data-testid":"input-pos-search"})]})]}),(0,b.jsx)(f.CardContent,{className:"flex-1 min-h-0 p-0 flex flex-col",children:(0,b.jsxs)(k.Tabs,{defaultValue:"products",className:"h-full flex flex-col px-5 pt-4",children:[(0,b.jsxs)(k.TabsList,{className:"grid w-full grid-cols-2 p-1 bg-muted/50",children:[(0,b.jsxs)(k.TabsTrigger,{value:"products","data-testid":"tab-products",className:"gap-2 data-[state=active]:shadow-sm transition-all",children:[(0,b.jsx)(v.Package,{className:"h-4 w-4"}),"Products"]}),(0,b.jsxs)(k.TabsTrigger,{value:"services","data-testid":"tab-services",className:"gap-2 data-[state=active]:shadow-sm transition-all",children:[(0,b.jsx)(w.Wrench,{className:"h-4 w-4"}),"Services"]})]}),(0,b.jsx)(k.TabsContent,{value:"products",className:"flex-1 min-h-0 mt-4 outline-none",children:(0,b.jsx)(l.ScrollArea,{className:"h-full pb-6",children:$?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 pb-4",children:[...Array(9)].map((a,c)=>(0,b.jsx)(j.Skeleton,{className:"h-[120px] rounded-xl"},c))}):T&&0!==T.length?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 xl:gap-4 pb-4",children:T.map(a=>(0,b.jsxs)("button",{onClick:()=>V(a,"product"),className:"group relative flex flex-col p-4 border border-border/60 rounded-xl text-left hover-elevate active-elevate-2 transition-all bg-background hover:border-primary/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary","data-testid":`button-add-product-${a.id}`,children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-primary/0 group-hover:bg-primary/20 transition-colors"}),(0,b.jsx)("div",{className:"font-semibold text-sm line-clamp-2 leading-tight flex-1",children:a.name}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-3 overflow-hidden",children:(0,b.jsx)(i.Badge,{variant:"outline",className:`text-[10px] uppercase font-bold tracking-wider rounded border ${(a=>{switch(a){case"networking":return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-200/50";case"cctv":return"bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-200/50";case"intercom":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-200/50";case"services":return"bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-200/50";default:return"bg-muted/50 text-muted-foreground border-border/50"}})(a.category)}`,children:a.category})}),(0,b.jsxs)("div",{className:"flex items-end justify-between mt-3 w-full",children:[(0,b.jsxs)("span",{className:"font-bold text-lg text-primary leading-none",children:["GH₵",Number(a.price).toFixed(2)]}),(0,b.jsxs)("span",{className:"text-[10px] text-muted-foreground uppercase font-medium tracking-wide bg-muted/50 px-1.5 py-0.5 rounded",children:[a.stockQuantity," in stock"]})]})]},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground bg-muted/20 rounded-xl border border-dashed mt-4",children:[(0,b.jsx)(v.Package,{className:"h-12 w-12 mb-4 opacity-30"}),(0,b.jsx)("p",{className:"font-medium",children:"No products match your search"})]})})}),(0,b.jsx)(k.TabsContent,{value:"services",className:"flex-1 min-h-0 mt-4 outline-none",children:(0,b.jsx)(l.ScrollArea,{className:"h-full pb-6",children:$?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 pb-4",children:[...Array(6)].map((a,c)=>(0,b.jsx)(j.Skeleton,{className:"h-[120px] rounded-xl"},c))}):U&&0!==U.length?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 xl:gap-4 pb-4",children:U.map(a=>(0,b.jsxs)("button",{onClick:()=>V(a,"service"),className:"group relative flex flex-col p-4 border border-border/60 rounded-xl text-left hover-elevate active-elevate-2 transition-all bg-background hover:border-primary/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary","data-testid":`button-add-service-${a.id}`,children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-secondary group-hover:bg-secondary/80 transition-colors"}),(0,b.jsx)("div",{className:"font-semibold text-sm line-clamp-2 leading-tight flex-1",children:a.name}),a.duration&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)(i.Badge,{variant:"secondary",className:"text-[10px] uppercase font-bold tracking-wider rounded",children:[a.duration," mins"]})}),(0,b.jsx)("div",{className:"flex items-end justify-between mt-3 w-full",children:(0,b.jsxs)("span",{className:"font-bold text-lg text-primary leading-none",children:["GH₵",Number(a.price).toFixed(2)]})})]},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground bg-muted/20 rounded-xl border border-dashed mt-4",children:[(0,b.jsx)(w.Wrench,{className:"h-12 w-12 mb-4 opacity-30"}),(0,b.jsx)("p",{className:"font-medium",children:"No services match your search"})]})})})]})})]})}),(0,b.jsx)("div",{className:"w-full lg:w-[400px] xl:w-[450px] flex flex-col min-h-0 p-4 lg:p-6 lg:pl-3",children:(0,b.jsxs)(f.Card,{className:"flex-1 flex flex-col min-h-0 border-border/60 shadow-sm overflow-hidden relative",children:[(0,b.jsx)(f.CardHeader,{className:"pb-4 pt-5 px-5 bg-background border-b relative z-10",children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center justify-between font-heading",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(y,{className:"h-5 w-5 text-primary"}),"Current Order"]}),D.length>0&&(0,b.jsxs)(i.Badge,{variant:"secondary",className:"px-2 py-0.5 text-xs font-bold",children:[D.reduce((a,b)=>a+b.quantity,0)," items"]})]})}),(0,b.jsx)(f.CardContent,{className:"flex-1 flex flex-col min-h-0 p-0 relative bg-muted/5",children:0===D.length?(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-muted-foreground",children:[(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/10 rounded-full blur-xl animate-pulse"}),(0,b.jsx)("div",{className:"bg-background rounded-full p-6 border border-border/50 relative shadow-sm",children:(0,b.jsx)(u.ShoppingCart,{className:"h-12 w-12 text-muted-foreground/50"})})]}),(0,b.jsx)("p",{className:"font-medium text-foreground/80 mb-1",children:"Your cart is empty"}),(0,b.jsx)("p",{className:"text-sm",children:"Scan or select items to begin"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.ScrollArea,{className:"flex-1",children:(0,b.jsx)("div",{className:"p-4 space-y-3",children:D.map(a=>(0,b.jsxs)("div",{className:"group flex flex-col p-3 bg-background border border-border/60 rounded-xl shadow-sm hover:border-primary/20 transition-colors","data-testid":`card-cart-item-${a.id}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"pr-4",children:[(0,b.jsx)("p",{className:"font-semibold text-sm leading-tight text-foreground",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:["GH₵",a.price.toFixed(2)," each"]})]}),(0,b.jsxs)("p",{className:"font-bold text-sm",children:["GH₵",(a.price*a.quantity).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,b.jsx)(i.Badge,{variant:"outline",className:`text-[10px] uppercase font-bold tracking-wider rounded border-0 bg-muted/50 ${"product"===a.type?"text-blue-500":"text-orange-500"}`,children:a.type}),(0,b.jsxs)("div",{className:"flex items-center gap-1 bg-muted/30 p-1 rounded-lg border border-border/50",children:[(0,b.jsx)("button",{type:"button",className:"h-7 w-7 flex items-center justify-center rounded-md hover:bg-background hover:shadow-sm transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary text-muted-foreground hover:text-foreground",onClick:()=>W(a.id,a.type,-1),"data-testid":`button-decrease-${a.id}`,children:(0,b.jsx)(s,{className:"h-3.5 w-3.5"})}),(0,b.jsx)("span",{className:"w-8 text-center font-semibold text-sm tabular-nums",children:a.quantity}),(0,b.jsx)("button",{type:"button",className:"h-7 w-7 flex items-center justify-center rounded-md hover:bg-background hover:shadow-sm transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary text-muted-foreground hover:text-foreground",onClick:()=>W(a.id,a.type,1),"data-testid":`button-increase-${a.id}`,children:(0,b.jsx)(q.Plus,{className:"h-3.5 w-3.5"})}),(0,b.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,b.jsx)("button",{type:"button",className:"h-7 w-7 flex items-center justify-center rounded-md hover:bg-destructive/10 hover:text-destructive transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-destructive text-muted-foreground",onClick:()=>{var b,c;return b=a.id,c=a.type,void E(D.filter(a=>a.id!==b||a.type!==c))},"data-testid":`button-remove-${a.id}`,children:(0,b.jsx)(t.Trash2,{className:"h-3.5 w-3.5"})})]})]})]},`${a.type}-${a.id}`))})}),(0,b.jsxs)("div",{className:"p-5 bg-background border-t shadow-[0_-4px_20px_-10px_rgba(0,0,0,0.1)] relative z-10",children:[(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-medium text-foreground",children:["GH₵",X.toFixed(2)]})]}),L>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-destructive font-medium bg-destructive/5 p-1.5 -mx-1.5 rounded-md px-1.5",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:["Discount ",(0,b.jsxs)(i.Badge,{variant:"destructive",className:"h-4 px-1 text-[9px] min-w-0",children:[L,"%"]})]}),(0,b.jsxs)("span",{children:["-GH₵",Y.toFixed(2)]})]}),(0,b.jsx)(m.Separator,{className:"my-3 opacity-50"}),(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Total"}),(0,b.jsxs)("span",{className:"text-3xl font-bold tracking-tighter text-primary",children:["GH₵",Z.toFixed(2)]})]})]}),(0,b.jsxs)(g.Button,{className:"w-full h-12 text-base font-bold shadow-md hover:shadow-lg transition-all",size:"lg",onClick:()=>{0===D.length?N({title:"Empty cart",description:"Please add items to the cart before checkout.",variant:"destructive"}):K(!0)},"data-testid":"button-checkout",children:[(0,b.jsx)(x,{className:"mr-2 h-5 w-5"}),"Process Payment"]})]})]})})]})}),(0,b.jsx)(n.Dialog,{open:J,onOpenChange:K,children:(0,b.jsxs)(n.DialogContent,{className:"sm:max-w-md p-0 overflow-hidden border-border/80 shadow-2xl",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-primary"}),(0,b.jsx)(n.DialogHeader,{className:"px-6 pt-6 pb-4 border-b bg-muted/5",children:(0,b.jsx)(n.DialogTitle,{className:"font-heading text-xl",children:"Complete Transaction"})}),(0,b.jsxs)("div",{className:"px-6 py-4 space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-4 bg-background",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Label,{htmlFor:"customerName",className:"text-xs uppercase tracking-wider text-muted-foreground font-semibold",children:"Customer Details (Optional)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(z.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{id:"customerName",placeholder:"John Doe",value:F,onChange:a=>G(a.target.value),className:"pl-10 h-11","data-testid":"input-customer-name"})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{id:"customerPhone",placeholder:"(555) 000-0000",value:H,onChange:a=>I(a.target.value),className:"pl-10 h-11","data-testid":"input-customer-phone"})]})})]}),(0,b.jsx)(m.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Label,{htmlFor:"discount",className:"text-xs uppercase tracking-wider text-muted-foreground font-semibold",children:"Apply Discount"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-medium",children:"%"}),(0,b.jsx)(h.Input,{id:"discount",type:"number",min:"0",max:"100",value:L||"",placeholder:"0",onChange:a=>M(Math.min(100,Math.max(0,Number(a.target.value)))),className:"pl-8 h-11 font-medium","data-testid":"input-discount"})]}),[10,15,20].map(a=>(0,b.jsxs)(g.Button,{type:"button",variant:L===a?"default":"outline",className:"h-11 px-3 tabular-nums font-semibold",onClick:()=>M(a),children:[a,"%"]},a))]})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-4 rounded-xl space-y-3 border border-border/50",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-medium",children:["GH₵",X.toFixed(2)]})]}),L>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-destructive font-medium",children:[(0,b.jsxs)("span",{children:["Discount (",L,"%)"]}),(0,b.jsxs)("span",{children:["-GH₵",Y.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"pt-2 border-t flex justify-between items-center text-lg font-bold",children:[(0,b.jsx)("span",{className:"text-foreground",children:"Total Due"}),(0,b.jsxs)("span",{className:"text-primary text-2xl tracking-tighter",children:["GH₵",Z.toFixed(2)]})]})]})]}),(0,b.jsxs)(n.DialogFooter,{className:"px-6 py-4 border-t bg-muted/5 sm:justify-between items-center gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>K(!1),className:"text-muted-foreground","data-testid":"button-cancel-checkout",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:()=>{S.mutate({customerName:F,customerPhone:H,discount:Y,items:D.map(a=>({productId:a.productId,serviceId:a.serviceId,name:a.name,quantity:a.quantity,unitPrice:a.price}))})},disabled:S.isPending,className:"h-11 px-8 font-bold","data-testid":"button-confirm-sale",children:S.isPending?"Confirming...":"Complete Order"})]})]})})]})}a.s(["default",()=>D],95987)}];

//# sourceMappingURL=Desktop_PROJECT%202026_SiliconPOS_src_app_%28authenticated%29_pos_page_tsx_9ffc30e1._.js.map